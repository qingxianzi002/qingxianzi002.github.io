<!DOCTYPE html>


<html lang="en">
  

    <head>
      <meta charset="utf-8" />
       
      <meta name="keywords" content="生活，旅行，思考，代码" />
       
      <meta name="description" content="有事者,事竟成;破釜沉舟,百二秦关终归楚;苦心人,天不负;卧薪尝胆,三千越甲可吞吴。" />
      
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title>Ajax |  清弦子的个人博客</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    <link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head>
  </html>
</html>


<body>
  <div id="app">
    
      
      <canvas width="1777" height="841"
        style="position: fixed; left: 0px; top: 0px; z-index: 99999; pointer-events: none;"></canvas>
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-前端/Ajax"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  Ajax
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/08/07/%E5%89%8D%E7%AB%AF/Ajax/" class="article-date">
  <time datetime="2023-08-06T18:45:40.126Z" itemprop="datePublished">2023-08-07</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> Word count:</span>
            <span class="post-count">12.2k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> Reading time≈</span>
            <span class="post-count">56 min</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="一、客户端与服务器"><a href="#一、客户端与服务器" class="headerlink" title="一、客户端与服务器"></a>一、客户端与服务器</h2><h3 id="1-1-服务器"><a href="#1-1-服务器" class="headerlink" title="1.1   服务器"></a>1.1   服务器</h3><ul>
<li>上网过程中，<strong>存放</strong>和<strong>对外提供资源</strong>的电脑</li>
<li>本质是一台电脑，但性能比一般的电脑高</li>
</ul>
<h3 id="1-2-客户端"><a href="#1-2-客户端" class="headerlink" title="1.2   客户端"></a>1.2   客户端</h3><ul>
<li>上网过程中，负责<strong>获取和消费资源</strong>的电脑</li>
</ul>
<h3 id="1-3-通信过程"><a href="#1-3-通信过程" class="headerlink" title="1.3   通信过程"></a>1.3   通信过程</h3><p><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE2.png"></p>
<ul>
<li>三个步骤：请求，处理，响应</li>
</ul>
<h2 id="二、URL地址"><a href="#二、URL地址" class="headerlink" title="二、URL地址"></a>二、URL地址</h2><h3 id="2-1-概念"><a href="#2-1-概念" class="headerlink" title="2.1   概念"></a>2.1   概念</h3><ul>
<li>用于表示互联网上每个资源的唯一存放位置</li>
<li>浏览器通过这个URL地址，才能正确定位资源的存放位置，从而成功访问到对应的资源</li>
</ul>
<h3 id="2-2-组成"><a href="#2-2-组成" class="headerlink" title="2.2   组成"></a>2.2   组成</h3><ul>
<li>客户端与服务器之间的通信协议</li>
<li>存有该资源的服务器名称</li>
<li>资源在服务器上具体的存放位置</li>
</ul>
<p><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE1.png"></p>
<h2 id="三、数据"><a href="#三、数据" class="headerlink" title="三、数据"></a>三、数据</h2><h3 id="3-1-概念"><a href="#3-1-概念" class="headerlink" title="3.1   概念"></a>3.1   概念</h3><ul>
<li>是服务器对外提供的一种资源，也需通过请求—处理—响应的方式获取</li>
</ul>
<h3 id="3-2-如何请求服务器上的数据资源"><a href="#3-2-如何请求服务器上的数据资源" class="headerlink" title="3.2   如何请求服务器上的数据资源"></a>3.2   如何请求服务器上的数据资源</h3><ul>
<li>需要用到XMLHttpRequest对象</li>
<li>XMLHttpRequest是浏览器提供的 js 成员，通过它，可以请求服务器上的数据资源</li>
<li>用法为：<strong>var xhrObj &#x3D; new XMLHttpRequest()</strong></li>
</ul>
<h2 id="四、资源的请求方式"><a href="#四、资源的请求方式" class="headerlink" title="四、资源的请求方式"></a>四、资源的请求方式</h2><h3 id="4-1-请求方式"><a href="#4-1-请求方式" class="headerlink" title="4.1   请求方式"></a>4.1   请求方式</h3><h4 id="4-1-1-get请求"><a href="#4-1-1-get请求" class="headerlink" title="4.1.1   get请求"></a>4.1.1   get请求</h4><ul>
<li>获取服务端资源</li>
</ul>
<h4 id="4-1-2-post请求"><a href="#4-1-2-post请求" class="headerlink" title="4.1.2   post请求"></a>4.1.2   post请求</h4><ul>
<li>向服务器提交资源</li>
</ul>
<h2 id="五、概念"><a href="#五、概念" class="headerlink" title="五、概念"></a>五、概念</h2><ul>
<li>全称为 Asynchronous Javascript And XML (异步 JavaScript 和 XML)</li>
<li>在网页中利用 XML HttpRequest 对象和服务器进行数据交互的方式</li>
</ul>
<h2 id="六、jQuery-中的-Ajax"><a href="#六、jQuery-中的-Ajax" class="headerlink" title="六、jQuery 中的 Ajax"></a>六、jQuery 中的 Ajax</h2><ul>
<li>浏览器中提供的 XML HttpRequest 用法复杂，所以 jQuery 对 XMLHttpRequest 进行封装，提供一系列 Ajax 相关的函数，极大降低了 Ajax 的使用难度</li>
</ul>
<h3 id="6-1-发起请求的最常用的三个方法"><a href="#6-1-发起请求的最常用的三个方法" class="headerlink" title="6.1   发起请求的最常用的三个方法"></a>6.1   发起请求的最常用的三个方法</h3><h4 id="6-1-1-get"><a href="#6-1-1-get" class="headerlink" title="6.1.1   $.get()"></a>6.1.1   $.get()</h4><ul>
<li><p>从服务器上拿资源到客户端上</p>
</li>
<li><p>语法格式为： $.get(url , [data] , [callback])</p>
</li>
<li><p>其语法格式的解释：</p>
<ul>
<li>url：String类型，必须填写的内容，其含义为要请求的资源地址</li>
<li>data：object类型，非必填内容，其含义为请求资源期间要携带的参数</li>
<li>callback：function，非必填内容，其含义为请求成功时的回调函数</li>
</ul>
</li>
<li><p>不带参数的请求（直接提供请求的URL地址和请求成功之后的回调函数</p>
<ul>
<li><p>示例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;D:/JQuery/jquery-3.6.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btnGET&quot;</span>&gt;</span>发起不带参数的GET请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            $(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&#x27;#btnGET&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    $.<span class="title function_">get</span>(<span class="string">&#x27;http://www.liulongbin.top:3006/api/getbooks&#x27;</span>,<span class="keyword">function</span>(<span class="params">res</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>带参数的请求</p>
<ul>
<li><p>示例</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;D:/JQuery/jquery-3.6.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btnGET&quot;</span>&gt;</span>发起带参数的GET请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            $(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&#x27;#btnGET&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    $.<span class="title function_">get</span>(<span class="string">&#x27;http://www.liulongbin.top:3006/api/getbooks&#x27;</span>,&#123;<span class="attr">id</span>:<span class="number">3</span>&#125;,<span class="keyword">function</span>(<span class="params">res</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="6-1-2-post"><a href="#6-1-2-post" class="headerlink" title="6.1.2   $.post()"></a>6.1.2   $.post()</h4><ul>
<li><p>功能单一，专门用来发起post请求，从而向服务器提交数据</p>
</li>
<li><p>语法格式：$.post(url,[data],[callback])</p>
</li>
<li><p>其语法格式的解释：</p>
<ul>
<li>url：String类型，必须填写的内容，其含义为提交数据的地址</li>
<li>data：object类型，非必填内容，其含义为要提交的数据</li>
<li>callback：function，非必填内容，其含义为数据提交成功时的回调函数</li>
</ul>
</li>
<li><p>示例</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;D:/JQuery/jquery-3.6.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btnGET&quot;</span>&gt;</span>发起POST请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            $(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&#x27;#btnGET&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    $.<span class="title function_">post</span>(<span class="string">&#x27;http://www.liulongbin.top:3006/api/addbook&#x27;</span>,&#123;<span class="attr">bookname</span>:<span class="string">&quot;杨生传&quot;</span>,<span class="attr">author</span>:<span class="string">&quot;杨小生&quot;</span>,<span class="attr">publisher</span>:<span class="string">&quot;深圳图书出版社&quot;</span>&#125;,<span class="keyword">function</span>(<span class="params">res</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="6-1-3-ajax"><a href="#6-1-3-ajax" class="headerlink" title="6.1.3   $.ajax()"></a>6.1.3   $.ajax()</h4><ul>
<li>功能比较综合的函数，它允许我们对 Ajax 请求进行更详细的配置</li>
<li>基本语法格式：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">	<span class="attr">type</span>:<span class="string">&#x27;&#x27;</span>,  <span class="comment">//请求的方式，例如 GET 或 POST</span></span><br><span class="line">	<span class="attr">url</span>:<span class="string">&#x27;&#x27;</span>,   <span class="comment">//请求的URL地址</span></span><br><span class="line">	<span class="attr">data</span>:&#123; &#125;, <span class="comment">//这次请求要携带的数据</span></span><br><span class="line">	<span class="attr">success</span>:<span class="keyword">function</span>(<span class="params">res</span>)&#123; &#125;   <span class="comment">//请求成功之后的回调函数</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>示例：</p>
<ul>
<li><p>发起GET请求</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;D:/JQuery/jquery-3.6.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btnGET&quot;</span>&gt;</span>发起GET请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            $(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&#x27;#btnGET&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">type</span>:<span class="string">&#x27;GET&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">url</span>:<span class="string">&#x27;http://www.liulongbin.top:3006/api/getbooks&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">id</span>:<span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">success</span>:<span class="keyword">function</span>(<span class="params">res</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>发起POST请求</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;D:/JQuery/jquery-3.6.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btnGET&quot;</span>&gt;</span>发起POST请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            $(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&#x27;#btnGET&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">type</span>:<span class="string">&#x27;POST&#x27;</span>,  <span class="comment">//请求的方式</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">url</span>:<span class="string">&#x27;http://www.liulongbin.top:3006/api/addbook&#x27;</span>,   <span class="comment">//请求的URL地址</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">data</span>:&#123;   <span class="comment">//要提交给服务器的数据</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">bookname</span>:<span class="string">&quot;水浒传&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">author</span>:<span class="string">&quot;施耐庵&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">publisher</span>:<span class="string">&quot;上海图书出版社&quot;</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">success</span>:<span class="keyword">function</span>(<span class="params">res</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="七、接口"><a href="#七、接口" class="headerlink" title="七、接口"></a>七、接口</h2><h3 id="7-1-概念"><a href="#7-1-概念" class="headerlink" title="7.1   概念"></a>7.1   概念</h3><ul>
<li><p>使用Ajax请求数据时，被请求的URL地址，就叫做数据接口（简称接口）。同时，每个接口必须有请求方式。</p>
</li>
<li><p>例如：</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://www.liulongbin.top:3006/api/getbooks">http://www.liulongbin.top:3006/api/getbooks</a>    获取图书列表的接口（GET请求）</li>
<li><a target="_blank" rel="noopener" href="http://www.liulongbin.top:3006/api/addbook">http://www.liulongbin.top:3006/api/addbook</a>     添加图书的接口（POST请求）</li>
</ul>
</li>
</ul>
<h3 id="7-2-分析接口的请求过程"><a href="#7-2-分析接口的请求过程" class="headerlink" title="7.2   分析接口的请求过程"></a>7.2   分析接口的请求过程</h3><h4 id="7-2-1-通过GET方式请求接口的过程"><a href="#7-2-1-通过GET方式请求接口的过程" class="headerlink" title="7.2.1   通过GET方式请求接口的过程"></a>7.2.1   通过GET方式请求接口的过程</h4><p><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE3.png"></p>
<h4 id="7-2-2-通过POST方式请求接口的过程"><a href="#7-2-2-通过POST方式请求接口的过程" class="headerlink" title="7.2.2   通过POST方式请求接口的过程"></a>7.2.2   通过POST方式请求接口的过程</h4><p><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE4.png"></p>
<h3 id="7-3-接口测试工具"><a href="#7-3-接口测试工具" class="headerlink" title="7.3   接口测试工具"></a>7.3   接口测试工具</h3><ul>
<li><p>验证接口是否被正常访问</p>
</li>
<li><p>好处：不用写代码，就可以进行调用和测试</p>
</li>
<li><p>测试工具官方下载网址：<a target="_blank" rel="noopener" href="https://www.postman.com/downloads/">https://www.postman.com/downloads/</a></p>
</li>
</ul>
<h3 id="7-4-接口文档"><a href="#7-4-接口文档" class="headerlink" title="7.4   接口文档"></a>7.4   接口文档</h3><h4 id="7-4-1-概念"><a href="#7-4-1-概念" class="headerlink" title="7.4.1   概念"></a>7.4.1   概念</h4><ul>
<li>接口的说明文档，它是我们调用接口的依据</li>
</ul>
<h4 id="7-4-2-组成部分"><a href="#7-4-2-组成部分" class="headerlink" title="7.4.2   组成部分"></a>7.4.2   组成部分</h4><ul>
<li>接口名称：用来标识各个接口的简单说明，如登陆接口，获取图书列表接口等</li>
<li>接口URL：接口的调用地址</li>
<li>调用方式：接口的调用方式：如 GET 或 POST</li>
<li>参数格式：接口需要传递的参数，每个参数必须包含参数名称、参数类型、是否必选、参数说明这4项内容</li>
<li>响应格式：接口的返回值的详细描述，一般包含数据名称、数据类型、说明3项内容</li>
<li>返回示例（可选）：通过对象的形式，例举服务器返回数据的结构</li>
</ul>
<h2 id="八、form表单与模板引擎"><a href="#八、form表单与模板引擎" class="headerlink" title="八、form表单与模板引擎"></a>八、form表单与模板引擎</h2><h3 id="8-1-form表单的基本使用"><a href="#8-1-form表单的基本使用" class="headerlink" title="8.1   form表单的基本使用"></a>8.1   form表单的基本使用</h3><h4 id="8-1-1-概念"><a href="#8-1-1-概念" class="headerlink" title="8.1.1   概念"></a>8.1.1   概念</h4><ul>
<li>表单在网页中主要负责<strong>数据采集功能</strong></li>
</ul>
<h4 id="8-1-2-组成部分"><a href="#8-1-2-组成部分" class="headerlink" title="8.1.2   组成部分"></a>8.1.2   组成部分</h4><ul>
<li>表单标签</li>
<li>表单域<ul>
<li>文本框</li>
<li>密码框</li>
<li>隐藏域</li>
<li>多行文本框</li>
<li>复选框</li>
<li>单选框</li>
<li>下拉选择框</li>
<li>文件上传框</li>
<li>·······</li>
</ul>
</li>
<li>表单按钮</li>
</ul>
<h4 id="8-1-3-标签的属性"><a href="#8-1-3-标签的属性" class="headerlink" title="8.1.3   &lt;form&gt;标签的属性"></a>8.1.3   <code>&lt;form&gt;</code>标签的属性</h4><ul>
<li><code>&lt;form&gt;</code>标签用来采集数据，<code>&lt;form&gt;</code>标签的属性则是用来规定<strong>如何把采集到的数据发送到服务器</strong><table>
<thead>
<tr>
<th align="center">属性</th>
<th align="center">值</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">action</td>
<td align="center">URL地址</td>
<td align="center">规定当提交表单时，向何处发送表单数据</td>
</tr>
<tr>
<td align="center">method</td>
<td align="center">get或post</td>
<td align="center">规定以何种方式把表单数据提交到 action URL</td>
</tr>
<tr>
<td align="center">enctype</td>
<td align="center">application&#x2F;x-www-form-urlencoded , multipart&#x2F;form-data , text&#x2F;plain</td>
<td align="center">规定在发送表单数据之前如何对其进行编码</td>
</tr>
<tr>
<td align="center">target</td>
<td align="center">_blank , _self , _parent , _top , framename</td>
<td align="center">规定在何处打开 action URL</td>
</tr>
</tbody></table>
</li>
</ul>
<h5 id="8-1-3-1-action"><a href="#8-1-3-1-action" class="headerlink" title="8.1.3.1   action"></a>8.1.3.1   action</h5><ul>
<li>action 属性用来规定当提交表单时，<strong>向何处发送表单数据</strong></li>
<li>action 属性的值是后端提供的一个 URL 地址，这个 URL 地址专门负责接收表单提交过来的数据</li>
<li>当<code>&lt;form&gt;</code>表单在未指定 action 属性值的情况下，action 的默认值为当前页面的 URL 地址</li>
</ul>
<h5 id="8-1-3-2-target"><a href="#8-1-3-2-target" class="headerlink" title="8.1.3.2   target"></a>8.1.3.2   target</h5><ul>
<li>target 属性用来规定<strong>在何处打开 action URL</strong></li>
<li>默认值为_self</li>
<li><table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">_blank</td>
<td align="left">在新窗口中打开</td>
</tr>
<tr>
<td align="left">_self</td>
<td align="left">默认，在相同的框架中打开</td>
</tr>
<tr>
<td align="left">_parent</td>
<td align="left">在父框架集中打开（很少用）</td>
</tr>
<tr>
<td align="left">_top</td>
<td align="left">在整个窗口中打开（很少用）</td>
</tr>
<tr>
<td align="left">framename</td>
<td align="left">在指定的框架中打开（很少用）</td>
</tr>
</tbody></table>
</li>
</ul>
<h5 id="8-1-3-3-method"><a href="#8-1-3-3-method" class="headerlink" title="8.1.3.3   method"></a>8.1.3.3   method</h5><ul>
<li>method 属性用来规定<strong>以何种方式</strong>把表单数据提交到 action URL</li>
<li>可选值为get 和 post</li>
<li>默认情况下，method 的值为get，表示通过 URL 地址的形式，把表单数据提交到 action URL</li>
<li>【注意】：<ul>
<li><font color="red"><strong>get 方法适合用来提交少量的、简单的数据（信息明显）</strong></font></li>
<li><font color="red"><strong>post 方法适合用来提交大量的、复杂的、或包含文件上传的数据（数据更隐蔽）</strong></font></li>
</ul>
</li>
</ul>
<h5 id="8-1-3-4-enctype"><a href="#8-1-3-4-enctype" class="headerlink" title="8.1.3.4   enctype"></a>8.1.3.4   enctype</h5><ul>
<li>enctype 属性用来规定在发送表单数据之前如何对数据进行编码</li>
<li>默认可选值为application&#x2F;x-www-form-urlencoded, 表示在发送前编码所有的字符</li>
<li><table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">application&#x2F;x-www-form-urlencoded</td>
<td align="left">在发送前编码所有字符（默认）</td>
</tr>
<tr>
<td align="left">multipart&#x2F;form-data</td>
<td align="left">不对字符编码，在使用包含文件上传控件的表单时，必须使用该值</td>
</tr>
<tr>
<td align="left">text&#x2F;plain</td>
<td align="left">空格转换为“+”加号，但不对特殊字符编码（很少用）</td>
</tr>
</tbody></table>
</li>
</ul>
<h4 id="8-1-4-表单的同步提交"><a href="#8-1-4-表单的同步提交" class="headerlink" title="8.1.4   表单的同步提交"></a>8.1.4   表单的同步提交</h4><ul>
<li>通过点击submit按钮，触发表单提交的操作，从而使页面跳转到 action URL 的行为</li>
</ul>
<h3 id="8-2-通过-Ajax-提交表单数据"><a href="#8-2-通过-Ajax-提交表单数据" class="headerlink" title="8.2   通过 Ajax 提交表单数据"></a>8.2   通过 Ajax 提交表单数据</h3><h4 id="8-2-1-监听表单提交事件"><a href="#8-2-1-监听表单提交事件" class="headerlink" title="8.2.1   监听表单提交事件"></a>8.2.1   监听表单提交事件</h4><h5 id="8-2-1-1-示例"><a href="#8-2-1-1-示例" class="headerlink" title="8.2.1.1   示例"></a>8.2.1.1   示例</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;D:/JQuery/jquery-3.6.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/login&quot;</span> <span class="attr">id</span>=<span class="string">&quot;f1&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;user_name&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password1&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">/*第一种</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            $(function()&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                $(&quot;#f1&quot;).submit(function()&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                    alert(&quot;监听到表单的提交事件&quot;);</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                &#125;);</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            &#125;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">/*第二种*/</span></span></span><br><span class="line"><span class="language-javascript">            $(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&quot;#f1&quot;</span>).<span class="title function_">on</span>(<span class="string">&quot;submit&quot;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">alert</span>(<span class="string">&quot;监听到表单的提交事件&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="8-2-2-阻止表单默认的提交行为"><a href="#8-2-2-阻止表单默认的提交行为" class="headerlink" title="8.2.2   阻止表单默认的提交行为"></a>8.2.2   阻止表单默认的提交行为</h4><ul>
<li>可以通过事件对象的 event.preventDefault() 函数，来组织表单的提交和页面的跳转</li>
<li>示例</li>
</ul>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;#form1&quot;</span>).<span class="title function_">submit</span>(<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">	e.<span class="title function_">preventDefault</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">&quot;#form1&quot;</span>).<span class="title function_">on</span>(<span class="string">&quot;submit&quot;</span>,<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">	e.<span class="title function_">preventDefault</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="8-2-3-快速获取表单中的数据"><a href="#8-2-3-快速获取表单中的数据" class="headerlink" title="8.2.3   快速获取表单中的数据"></a>8.2.3   快速获取表单中的数据</h4><h5 id="8-2-3-1-serialize-函数"><a href="#8-2-3-1-serialize-函数" class="headerlink" title="8.2.3.1   serialize()函数"></a>8.2.3.1   serialize()函数</h5><ul>
<li>语法格式为：<code>$(selector).serialize()</code></li>
<li>好处：<strong>可以一次性获取表单中的所有数据</strong></li>
<li>示例：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;form1&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">$(&#x27;form1&#x27;).serialize();</span><br><span class="line"></span><br><span class="line">结果为：username=用户名的值&amp;password=密码的值</span><br></pre></td></tr></table></figure>

<ul>
<li>【注意】：</li>
</ul>
<p>​		在使用其函数时，必须为每个表单元素添加 name 属性；</p>
<h3 id="8-3-模板引擎的基本概念"><a href="#8-3-模板引擎的基本概念" class="headerlink" title="8.3   模板引擎的基本概念"></a>8.3   模板引擎的基本概念</h3><ul>
<li>根据程序员指定的<strong>模板结构</strong>和<strong>数据</strong>，自动生成一个完整的HTML页面</li>
<li>好处：<ul>
<li>减少了字符串的拼接操作</li>
<li>使代码结构更清晰</li>
<li>使代码更易于阅读与维护</li>
</ul>
</li>
</ul>
<h3 id="8-4-art-template模板引擎"><a href="#8-4-art-template模板引擎" class="headerlink" title="8.4   art-template模板引擎"></a>8.4   art-template模板引擎</h3><h4 id="8-4-1-官方网址"><a href="#8-4-1-官方网址" class="headerlink" title="8.4.1   官方网址"></a>8.4.1   官方网址</h4><ul>
<li>中文官方首页：<a target="_blank" rel="noopener" href="http://aui.github.io/art-template/zh-cn/index.html">http://aui.github.io/art-template/zh-cn/index.html</a></li>
<li>安装地址：<a target="_blank" rel="noopener" href="http://aui.github.io/art-template/zh-cn/docs/installation.html">http://aui.github.io/art-template/zh-cn/docs/installation.html</a></li>
</ul>
<h4 id="8-4-2-传统方式渲染UI结构"><a href="#8-4-2-传统方式渲染UI结构" class="headerlink" title="8.4.2   传统方式渲染UI结构"></a>8.4.2   传统方式渲染UI结构</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;D:/JQuery/jquery-3.6.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;title&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>姓名：<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>年龄：<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>会员：<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;isVIP&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>注册时间：<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;regTime&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>爱好：</span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;hobby&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>爱好1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>爱好2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> data = &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">title</span>:<span class="string">&#x27;&lt;h3&gt;用户信息&lt;/h3&gt;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>:<span class="string">&#x27;zs&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">age</span>:<span class="number">20</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">isVIP</span>:<span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">regTime</span>:<span class="keyword">new</span> <span class="title class_">Date</span>(),</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">hobby</span>:[<span class="string">&#x27;吃饭&#x27;</span>,<span class="string">&#x27;睡觉&#x27;</span>,<span class="string">&#x27;打豆豆&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        $(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&#x27;#name&#x27;</span>).<span class="title function_">html</span>(data.<span class="property">name</span>);</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&#x27;#title&#x27;</span>).<span class="title function_">html</span>(data.<span class="property">title</span>);</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&#x27;#age&#x27;</span>).<span class="title function_">html</span>(data.<span class="property">age</span>);</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&#x27;#isVIP&#x27;</span>).<span class="title function_">html</span>(data.<span class="property">isVIP</span>);</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&#x27;#regTime&#x27;</span>).<span class="title function_">html</span>(data.<span class="property">regTime</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> rows = [];</span></span><br><span class="line"><span class="language-javascript">            $.<span class="title function_">each</span>(data.<span class="property">hobby</span>,<span class="keyword">function</span>(<span class="params">i,item</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                rows.<span class="title function_">push</span>(<span class="string">&#x27;&lt;li&gt;&#x27;</span>+item+<span class="string">&#x27;&lt;/li&gt;&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&#x27;#hobby&#x27;</span>).<span class="title function_">html</span>(rows.<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>效果如下：</p>
<p><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE5.png"></p>
<h4 id="8-4-3-使用方式"><a href="#8-4-3-使用方式" class="headerlink" title="8.4.3   使用方式"></a>8.4.3   使用方式</h4><ul>
<li><p>基于传统的方式过于麻烦，所以采用 art-template 模板引擎进行使用</p>
</li>
<li><p>使用步骤为：</p>
<ul>
<li>导入 art-template</li>
<li>定义数据</li>
<li>定义模板</li>
<li>调用 template 函数</li>
<li>渲染 HTML 结构</li>
</ul>
</li>
<li><p>具体示例：</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--1.导入模板引擎--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--在window全局，多一个函数，叫做 template(模板的Id&#x27;,需要渲染的数据对象)--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;D:/JQuery/template-web.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;D:/JQuery/jquery-3.6.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--3.定义模板--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--3.1 模板的 HTML 结构，必须定义到 script 中--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&#123;&#123;&#125;&#125;表示占位的意思，是模板引擎带有的特性--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/html&quot;</span> <span class="attr">id</span>=<span class="string">&quot;tpl-user&quot;</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>姓名：</span><span class="template-variable">&#123;&#123;<span class="name">name</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>年龄：</span><span class="template-variable">&#123;&#123;<span class="name">age</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>会员：</span><span class="template-variable">&#123;&#123;<span class="name">isVIP</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>注册时间：</span><span class="template-variable">&#123;&#123;<span class="name">regTime</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    </span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//2.定义需要渲染的数据</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> data = &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">title</span>:<span class="string">&#x27;&lt;h3&gt;用户信息&lt;/h3&gt;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>:<span class="string">&#x27;zs&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">age</span>:<span class="number">20</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">isVIP</span>:<span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">regTime</span>:<span class="keyword">new</span> <span class="title class_">Date</span>(),</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">hobby</span>:[<span class="string">&#x27;吃饭&#x27;</span>,<span class="string">&#x27;睡觉&#x27;</span>,<span class="string">&#x27;打豆豆&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//4.调用 template 函数</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> htmlStr = <span class="title function_">template</span>(<span class="string">&#x27;tpl-user&#x27;</span>,data);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(htmlStr);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//5.渲染html结构</span></span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&#x27;#container&#x27;</span>).<span class="title function_">html</span>(htmlStr);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="8-4-4-语法"><a href="#8-4-4-语法" class="headerlink" title="8.4.4   语法"></a>8.4.4   语法</h4><ul>
<li><p>提供了这个语法格式</p>
</li>
<li><p>在中</p>
<ul>
<li>输出：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;value&#125;&#125;   <span class="comment">//变量的输出</span></span><br><span class="line">&#123;&#123;obj.<span class="property">key</span>&#125;&#125;  <span class="comment">//对象属性的输出</span></span><br><span class="line">&#123;&#123;obj[<span class="string">&#x27;key&#x27;</span>]&#125;&#125;  </span><br><span class="line">&#123;&#123;a ? b : c&#125;&#125;  <span class="comment">//三元表达式输出</span></span><br><span class="line">&#123;&#123;a || b&#125;&#125;   <span class="comment">//逻辑或的输出</span></span><br><span class="line">&#123;&#123;a + b&#125;&#125;   <span class="comment">//加减乘除表达式输出</span></span><br></pre></td></tr></table></figure>

<ul>
<li>原文输出：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;@ value&#125;&#125;</span><br><span class="line"><span class="comment">//如果要输出的value值中，包含HTML标签结构，则需要使用原文输出，才能保证HTML标签被正常渲染</span></span><br></pre></td></tr></table></figure>

<ul>
<li>条件输出：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">在&#123;&#123;a&#125;&#125;中使用<span class="keyword">if</span>...<span class="keyword">else</span> <span class="keyword">if</span>.../<span class="keyword">if</span>的方式，进行按需输出</span><br><span class="line"></span><br><span class="line">&#123;&#123;<span class="keyword">if</span> value&#125;&#125; 按需输出的内容 &#123;&#123;/<span class="keyword">if</span>&#125;&#125;</span><br><span class="line">&#123;&#123;<span class="keyword">if</span> v1&#125;&#125; 按需输出的内容 &#123;&#123;<span class="keyword">else</span> <span class="keyword">if</span> v2&#125;&#125; 按需输出的内容 &#123;&#123;/<span class="keyword">if</span>&#125;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>循环输出：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">在&#123;&#123;a&#125;&#125;内，通过 each 语法循环数组，当前循环的索引使用 $index 进行访问 ，当前的循环项使用 $value 进行访问</span><br><span class="line"></span><br><span class="line">&#123;&#123;each arr&#125;&#125;</span><br><span class="line">	&#123;&#123;$index&#125;&#125; &#123;&#123;$value&#125;&#125;</span><br><span class="line">&#123;&#123;/each&#125;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>过滤器</p>
<ul>
<li><p>本质上是一个function处理函数</p>
</li>
<li><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;value | filterName&#125;&#125;</span><br><span class="line"></span><br><span class="line">基本语法：</span><br><span class="line">template.<span class="property">defaults</span>.<span class="property">imports</span>.<span class="property">filterName</span> = <span class="keyword">function</span>(<span class="params">value</span>)&#123;<span class="comment">/*return处理的结果*/</span>&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;注册时间：&#123;&#123;regTime | dateFormat&#125;&#125;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">template.<span class="property">defaults</span>.<span class="property">imports</span>.<span class="property">dateFormat</span> = <span class="keyword">function</span>(<span class="params">date</span>)&#123;</span><br><span class="line">	<span class="keyword">var</span> y = date.<span class="title function_">getFullYear</span>();</span><br><span class="line">	<span class="keyword">var</span> m = date.<span class="title function_">getMonth</span>()+<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">var</span> d = date.<span class="title function_">getDate</span>();</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> y+<span class="string">&#x27;-&#x27;</span>+m+<span class="string">&#x27;-&#x27;</span>+d <span class="comment">//注意，过滤器最后一定要return一个值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="8-5-模板引擎的实现原理"><a href="#8-5-模板引擎的实现原理" class="headerlink" title="8.5   模板引擎的实现原理"></a>8.5   模板引擎的实现原理</h3><h4 id="8-5-1-语法"><a href="#8-5-1-语法" class="headerlink" title="8.5.1   语法"></a>8.5.1   语法</h4><ul>
<li><p>exec（）函数用于<strong>检索字符串</strong>中的正则表达式的匹配</p>
</li>
<li><p>如果字符串中有匹配的值，则返回该匹配值，否则返回null</p>
</li>
<li></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">RegExpObject</span>,<span class="title function_">exec</span>(string)</span><br></pre></td></tr></table></figure>

<ul>
<li>示例：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> pattern = <span class="regexp">/o/</span>;</span><br><span class="line"><span class="comment">//输出的结果&#123;&quot;o&quot;,index:4,input:&quot;hello&quot;,groups:undefined&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(pattern.<span class="title function_">exec</span>(str))</span><br></pre></td></tr></table></figure>

<ul>
<li>正则表达式中（）包起来的内容表示一个分组，可以通过分组来<strong>提取自己想要的内容</strong></li>
<li>示例：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;&lt;div&gt;我是&#123;&#123;name&#125;&#125;&lt;/div&gt;&#x27;</span></span><br><span class="line"><span class="keyword">var</span> pattern = <span class="regexp">/&#123;&#123;([a-zA-z]+)&#125;&#125;/</span></span><br><span class="line"><span class="keyword">var</span> patternResult = pattern.<span class="title function_">exec</span>(str)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(patternResult)</span><br><span class="line"><span class="comment">//得到 name 相关的分组信息</span></span><br><span class="line"><span class="comment">// [&quot;&#123;&#123;name&#125;&#125;&quot;,&quot;name&quot;,index:7,input:&quot;&lt;div&gt;我是&#123;&#123;name&#125;&#125;&lt;/div&gt;&quot;,groups:undefined]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>replace（）函数用于在字符串中用一些字符替换另一些字符</li>
<li>格式为：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = <span class="string">&#x27;123456&#x27;</span>.<span class="title function_">replace</span>(<span class="string">&#x27;123&#x27;</span>,<span class="string">&#x27;abc&#x27;</span>)</span><br><span class="line"><span class="comment">//得到的 result 的值为字符串 &#x27;abc456&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>示例：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;&lt;div&gt;我是&#123;&#123;name&#125;&#125;&lt;/div&gt;&#x27;</span></span><br><span class="line"><span class="keyword">var</span> pattern = <span class="regexp">/&#123;&#123;([a-zA-z]+)&#125;&#125;/</span></span><br><span class="line"><span class="keyword">var</span> patternResult = pattern.<span class="title function_">exec</span>(str)</span><br><span class="line">str = str.<span class="title function_">replace</span>(patternResult[<span class="number">0</span>],patternResult[<span class="number">1</span>])  <span class="comment">//replace 函数返回值为替换后的新字符串</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str)</span><br><span class="line"><span class="comment">//输出的内容是：&lt;div&gt;我是name&lt;/div&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>消除中文本内容两旁的空格，则需更改上面的pattern为</li>
</ul>
<p><code>var pattern = /&#123;&#123;\s*([a-zA-Z]+)\s*&#125;&#125;/</code></p>
<ul>
<li>使用while循环replace</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;&lt;div&gt;&#123;&#123;name&#125;&#125;今年&#123;&#123; age &#125;&#125;岁了&lt;/div&gt;&#x27;</span></span><br><span class="line"><span class="keyword">var</span> pattern = <span class="regexp">/&#123;&#123;\s*([a-zA-z]+)\s*&#125;&#125;/</span></span><br><span class="line"><span class="keyword">var</span> patternResult = <span class="literal">null</span></span><br><span class="line"><span class="keyword">while</span>(patternResult = pattern.<span class="title function_">exec</span>(str))&#123;</span><br><span class="line">	str = str.<span class="title function_">replace</span>(patternResult[<span class="number">0</span>],patternResult[<span class="number">1</span>])  </span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str)</span><br><span class="line"><span class="comment">//&lt;div&gt;name今年age岁了&lt;/div&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>replace替换为真值</p>
</li>
<li><p>示例：</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>,<span class="attr">age</span>:<span class="number">20</span>&#125;</span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;&lt;div&gt;&#123;&#123;name&#125;&#125;今年&#123;&#123; age &#125;&#125;岁了&lt;/div&gt;&#x27;</span></span><br><span class="line"><span class="keyword">var</span> pattern = <span class="regexp">/&#123;&#123;\s*([a-zA-z]+)\s*&#125;&#125;/</span></span><br><span class="line"><span class="keyword">var</span> patternResult = <span class="literal">null</span></span><br><span class="line"><span class="keyword">while</span>(patternResult = pattern.<span class="title function_">exec</span>(str))&#123;</span><br><span class="line">	str = str.<span class="title function_">replace</span>(patternResult[<span class="number">0</span>],data[patternResult[<span class="number">1</span>]])  </span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str)</span><br></pre></td></tr></table></figure>

<h3 id="8-6-实现简易的模板引擎"><a href="#8-6-实现简易的模板引擎" class="headerlink" title="8.6   实现简易的模板引擎"></a>8.6   实现简易的模板引擎</h3><h4 id="8-6-1-实现步骤"><a href="#8-6-1-实现步骤" class="headerlink" title="8.6.1   实现步骤"></a>8.6.1   实现步骤</h4><ul>
<li>定义模板结构</li>
<li>预调用模板引擎</li>
<li>封装 template 函数</li>
<li>导入并使用自定义的模板引擎</li>
</ul>
<h4 id="8-6-2-示例"><a href="#8-6-2-示例" class="headerlink" title="8.6.2   示例"></a>8.6.2   示例</h4><p><strong>01.html</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/template.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;user-box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/html&quot;</span> <span class="attr">id</span>=<span class="string">&quot;tpl-user&quot;</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>姓名：</span><span class="template-variable">&#123;&#123;<span class="name">name</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>年龄：</span><span class="template-variable">&#123;&#123; <span class="name">age</span> &#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>性别：</span><span class="template-variable">&#123;&#123;  <span class="name">gender</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>住址：</span><span class="template-variable">&#123;&#123;<span class="name">address</span>  &#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  </span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 定义数据</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> data = &#123; <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>, <span class="attr">age</span>: <span class="number">28</span>, <span class="attr">gender</span>: <span class="string">&#x27;男&#x27;</span>, <span class="attr">address</span>: <span class="string">&#x27;北京顺义马坡&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 调用模板引擎</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> htmlStr = <span class="title function_">template</span>(<span class="string">&#x27;tpl-user&#x27;</span>, data)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 渲染HTML结构</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;user-box&#x27;</span>).<span class="property">innerHTML</span> = htmlStr</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>template.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">template</span>(<span class="params">id, data</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> str = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(id).<span class="property">innerHTML</span></span><br><span class="line">  <span class="keyword">var</span> pattern = <span class="regexp">/&#123;&#123;\s*([a-zA-Z]+)\s*&#125;&#125;/</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> pattResult = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">while</span> (pattResult = pattern.<span class="title function_">exec</span>(str)) &#123;</span><br><span class="line">    str = str.<span class="title function_">replace</span>(pattResult[<span class="number">0</span>], data[pattResult[<span class="number">1</span>]])</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> str</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="九、XMLHttpRequest的基本使用"><a href="#九、XMLHttpRequest的基本使用" class="headerlink" title="九、XMLHttpRequest的基本使用"></a>九、XMLHttpRequest的基本使用</h2><h3 id="9-1-概念"><a href="#9-1-概念" class="headerlink" title="9.1   概念"></a>9.1   概念</h3><ul>
<li>是浏览器提供的 Javascript 对象，通过它，可以<strong>请求服务器上的数据资源</strong></li>
<li>JQuery中的 Ajax 函数，是基于 xhr 对象封装出来的</li>
</ul>
<img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE6.png" style="zoom:80%;" />

<h3 id="9-2-使用xhr发起GET请求"><a href="#9-2-使用xhr发起GET请求" class="headerlink" title="9.2   使用xhr发起GET请求"></a>9.2   使用xhr发起GET请求</h3><ul>
<li><p>步骤</p>
<ul>
<li><p>创建 xhr 对象</p>
   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br></pre></td></tr></table></figure>
</li>
<li><p>调用 xhr.open() 函数（指定，请求方式与URL地址）</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>,<span class="string">&#x27;http://www.liulongbin.top:3006/api/getbooks&#x27;</span>);</span><br><span class="line"></span><br><span class="line">若发起的是一个带参数的<span class="variable constant_">GET</span>请求，则</span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>,<span class="string">&#x27;http://www.liulongbin.top:3006/api/getbooks?id=1&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>调用 xhr.send() 函数（发起Ajax请求）</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="title function_">send</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li>监听 xhr.onreadystatechange 事件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="comment">//4.1  监听 xhr 对象的请求状态readyState;   与服务器响应的状态status;</span></span><br><span class="line">	<span class="keyword">if</span>(xhr.<span class="property">readyState</span> === <span class="number">4</span> &amp;&amp; xhr.<span class="property">status</span> === <span class="number">200</span>)&#123;</span><br><span class="line">		<span class="comment">//4.2   打印服务器响应回来的数据</span></span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">responseText</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="9-3-xhr对象的readyState属性"><a href="#9-3-xhr对象的readyState属性" class="headerlink" title="9.3   xhr对象的readyState属性"></a>9.3   xhr对象的readyState属性</h3><ul>
<li><p>用来表示 Ajax 请求所处的状态，每个 Ajax 请求必然处于以下状态中的一个：</p>
</li>
<li><table>
<thead>
<tr>
<th align="center">值</th>
<th align="center">状态</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">0</td>
<td align="center">UNSENT</td>
<td align="center">XMLHttpRequest 对象已被创建，但尚未调用 open() 方法</td>
</tr>
<tr>
<td align="center">1</td>
<td align="center">OPENED</td>
<td align="center">open()方法已经被调用</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">HEADERS_RECEIVED</td>
<td align="center">send()方法已经被调用，响应头也已经被接受</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">LOADING</td>
<td align="center">数据接受中，此时 response 属性中已经包含部分数据</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">DONE</td>
<td align="center">Ajax 请求完成，这意味着数据传输已经彻底完成或失败</td>
</tr>
</tbody></table>
</li>
</ul>
<h3 id="9-4-查询字符串"><a href="#9-4-查询字符串" class="headerlink" title="9.4   查询字符串"></a>9.4   查询字符串</h3><h4 id="9-4-1-概念"><a href="#9-4-1-概念" class="headerlink" title="9.4.1   概念"></a>9.4.1   概念</h4><ul>
<li><p>在上方的 xhr.open 期间，使用问号（？）来在URL地址后面拼接的参数，叫做查询字符串</p>
</li>
<li><p>若有多个参数需要拼接，则需加上&amp;符号进行分隔</p>
</li>
</ul>
<h4 id="9-4-2-本质"><a href="#9-4-2-本质" class="headerlink" title="9.4.2   本质"></a>9.4.2   本质</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">get</span>(<span class="string">&#x27;url&#x27;</span>,&#123;<span class="attr">name</span>:<span class="string">&#x27;zs&#x27;</span>,<span class="attr">age</span>:<span class="number">20</span>&#125;,<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;)</span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line">$.<span class="title function_">get</span>(<span class="string">&#x27;url?name=zs&amp;age=20&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;)</span><br><span class="line"></span><br><span class="line">$.<span class="title function_">ajax</span>(<span class="attr">method</span>:<span class="string">&#x27;GET&#x27;</span>,<span class="attr">url</span>:<span class="string">&#x27;url&#x27;</span>,<span class="attr">date</span>:&#123;<span class="attr">name</span>:<span class="string">&#x27;zs&#x27;</span>,<span class="attr">age</span>:<span class="number">20</span>&#125;,<span class="attr">success</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;)</span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line">$.<span class="title function_">ajax</span>(<span class="attr">method</span>:<span class="string">&#x27;GET&#x27;</span>,<span class="attr">url</span>:<span class="string">&#x27;url?name=zs&amp;age=20&#x27;</span>,<span class="attr">success</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="9-5-URL编码与解码"><a href="#9-5-URL编码与解码" class="headerlink" title="9.5   URL编码与解码"></a>9.5   URL编码与解码</h3><ul>
<li>URL地址中，只允许英文字母、标点符号、数字，而不允许有中文等</li>
<li>若有中文等字符，则需使用如下方法进行编码和解码：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">encodeURl</span>(<span class="string">&#x27;中文内容&#x27;</span>)  编码的函数，其意思是将中文内容解析成机器看得懂的语言</span><br><span class="line"></span><br><span class="line"><span class="title function_">decodeURl</span>(<span class="string">&#x27;解析后的码&#x27;</span>)   解码的函数，其用法与上面相反</span><br></pre></td></tr></table></figure>

<h3 id="9-6-使用xhr发起POST请求"><a href="#9-6-使用xhr发起POST请求" class="headerlink" title="9.6   使用xhr发起POST请求"></a>9.6   使用xhr发起POST请求</h3><ul>
<li><p>步骤：</p>
<ul>
<li>创建 xhr 对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br></pre></td></tr></table></figure>

<ul>
<li>调用 xhr.open() 函数</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;POST&#x27;</span>,<span class="string">&#x27;http://www.liulongbin.top:3006/api/addbook&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>设置 Content-Type 属性（固定写法）</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;Content-Type&#x27;</span>,<span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>调用 xhr.send() 函数，同时指定要发送的数据</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="title function_">send</span>(<span class="string">&#x27;bookname=水浒传&amp;author=施耐庵&amp;publisher=天津图书出版社&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>监听 xhr.onreadystatechange 事件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">if</span>(xhr.<span class="property">readyState</span> === <span class="number">4</span> &amp;&amp; xhr.<span class="property">status</span> === <span class="number">200</span>)&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">responseText</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="十、数据交换格式"><a href="#十、数据交换格式" class="headerlink" title="十、数据交换格式"></a>十、数据交换格式</h2><h3 id="10-1-概念"><a href="#10-1-概念" class="headerlink" title="10.1   概念"></a>10.1   概念</h3><ul>
<li>服务器端与客户端之间进行数据传输与交换的格式</li>
<li>常用的数据交换格式分别是 XML 和 JSON</li>
</ul>
<p><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE7.png"></p>
<h3 id="10-2-XML"><a href="#10-2-XML" class="headerlink" title="10.2   XML"></a>10.2   XML</h3><ul>
<li>XML与HTML类似，也是一种标记语言</li>
<li>两者比较：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">note</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">to</span>&gt;</span>li<span class="tag">&lt;/<span class="name">to</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">from</span>&gt;</span>zs<span class="tag">&lt;/<span class="name">from</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">heading</span>&gt;</span>通知<span class="tag">&lt;/<span class="name">heading</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span>晚上开会<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">note</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>区别：</p>
<ul>
<li><p>HTML 被设计用来描述网页上的内容，是网页内容的载体</p>
</li>
<li><p>XML 被设计用来传输和存储数据，是数据的载体</p>
</li>
<li><p><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE8.png"></p>
</li>
</ul>
</li>
<li><p>缺点：</p>
<ul>
<li>格式臃肿，和数据无关的代码过多，体积大，传输效率低</li>
<li>解析XML比较麻烦（在JavaScript中）</li>
</ul>
</li>
</ul>
<h3 id="10-3-JSON"><a href="#10-3-JSON" class="headerlink" title="10.3   JSON"></a>10.3   JSON</h3><ul>
<li>JavaScript对象和数组的字符串表示法</li>
<li>使用文本表示一个 JS 对象或数组的信息</li>
<li>本质上是字符串，表示 Javascript 对象数据或数组数据</li>
</ul>
<h4 id="10-3-1-作用"><a href="#10-3-1-作用" class="headerlink" title="10.3.1   作用"></a>10.3.1   作用</h4><ul>
<li>一种轻量级的文本数据交换格式</li>
<li>类似于XML，专门用于存储和传输数据，但它比XML更小，更快，更易解析</li>
</ul>
<h4 id="10-3-2-两种结构"><a href="#10-3-2-两种结构" class="headerlink" title="10.3.2   两种结构"></a>10.3.2   两种结构</h4><ul>
<li><p>对象和数组两种结构</p>
</li>
<li><p>对象结构：</p>
<ul>
<li><p>是{key:value,key:value,…..}的键值对结构</p>
</li>
<li><p>key必须使用<strong>英文的双引号包裹</strong>的字符串</p>
</li>
<li><p>value的数据类型可以是数字、字符串、布尔值、null、数组、对象6种类型</p>
</li>
<li><pre><code class="js">&#123;
    &quot;name&quot;:&quot;zs&quot;,
    &quot;age&quot;:20,
    &quot;gender&quot;:&quot;男&quot;,
    &quot;address&quot;:null,
    &quot;hobby&quot;:[&quot;吃饭&quot;,&quot;睡觉&quot;,&quot;打豆豆&quot;]
&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">+ 【注意】</span><br><span class="line"></span><br><span class="line">  + 属性名必须使用双引号包裹</span><br><span class="line">  + 字符串类型的值必须用双引号包裹</span><br><span class="line">  + JSON 中不允许使用单引号表示空字符</span><br><span class="line">  + JSON 中不能写注释</span><br><span class="line">  + JSON 的最外层必须是对象或数组格式</span><br><span class="line">  + 不能使用 undefined 或函数作为 JSON 的值</span><br><span class="line"></span><br><span class="line">#### 10.3.3   JSON和JS对象的关系</span><br><span class="line"></span><br><span class="line">+ JSON 是 JS 对象的字符串表示法，它使用文本表示一个 JS 对象的信息，本质是一个字符串</span><br><span class="line">+ 示例：</span><br><span class="line"></span><br><span class="line">```js</span><br><span class="line">//这是一个对象</span><br><span class="line">var obj = &#123;a:&#x27;Hello&#x27;,b:&#x27;World&#x27;&#125;</span><br><span class="line"></span><br><span class="line">//这是一个 JSON 字符串，本质是一个字符串</span><br><span class="line">var json = &#x27;&#123;&quot;a&quot;:&quot;Hello&quot;,&quot;b&quot;:&quot;World&quot;&#125;&#x27;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
<li><p>实现从 JSON 字符串转换为 JS 对象，使用 JSON.parse() 方法：</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="string">&#x27;&#123;&quot;a&quot;:&quot;Hello&quot;,&quot;b&quot;:&quot;World&quot;&#125;&#x27;</span>)</span><br><span class="line"><span class="comment">//结果是 &#123;a:&#x27;Hello&#x27;,b:&#x27;World&#x27;&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>实现从 JS 对象转换为 JSON 字符串，使用 JSON.stringify() 方法：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> json = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;<span class="attr">a</span>:<span class="string">&#x27;Hello&#x27;</span>,<span class="attr">b</span>:<span class="string">&#x27;World&#x27;</span>&#125;)</span><br><span class="line"><span class="comment">//结果是 &#x27;&#123;&quot;a&quot;:&quot;Hello&quot;,&quot;b&quot;:&quot;World&quot;&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="10-3-4-序列化和反序列化"><a href="#10-3-4-序列化和反序列化" class="headerlink" title="10.3.4   序列化和反序列化"></a>10.3.4   序列化和反序列化</h4><ul>
<li>将数据对象转换为字符串的过程，叫做序列化</li>
<li>将字符串转换为数据对象的过程，叫做反序列化</li>
</ul>
<h3 id="10-4-封装自己的Ajax函数"><a href="#10-4-封装自己的Ajax函数" class="headerlink" title="10.4   封装自己的Ajax函数"></a>10.4   封装自己的Ajax函数</h3><p>####10.4.1   实现的效果：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--<span class="number">1.</span>导入自定义的ajax函数库--&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./itheima.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="comment">//2.调用自定义的 itheima 函数，发起 Ajax 数据请求</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="title function_">itheima</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="attr">method</span>:<span class="string">&#x27;请求类型&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="attr">url</span>:<span class="string">&#x27;请求地址&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="attr">data</span>:&#123; <span class="comment">/*请求参数对象*/</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="attr">success</span>:<span class="keyword">function</span>(<span class="params">res</span>)&#123;    <span class="comment">//成功的回调函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="variable language_">console</span>.<span class="title function_">log</span>(res)    <span class="comment">//打印数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h4 id="10-4-2-定义options参数选项"><a href="#10-4-2-定义options参数选项" class="headerlink" title="10.4.2   定义options参数选项"></a>10.4.2   定义options参数选项</h4><ul>
<li>itheima() 函数是我们自定义的Ajax函数，它接受一个配置对象作为参数，配置对象中可以配置如下属性：</li>
<li>method()   请求的类型</li>
<li>url               请求的URL地址</li>
<li>data            请求携带的数据</li>
<li>success       请求成功之后的回调函数</li>
</ul>
<h4 id="10-4-3-处理data参数"><a href="#10-4-3-处理data参数" class="headerlink" title="10.4.3   处理data参数"></a>10.4.3   处理data参数</h4><ul>
<li>需要把data对象，转换成查询字符串的格式，从而提交给服务器，因此提前定义 resolveData 函数如下：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">resolveData</span>(<span class="params">data</span>)&#123;</span><br><span class="line">	<span class="keyword">var</span> arr= []</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">let</span> k <span class="keyword">in</span> data)&#123;</span><br><span class="line">		arr.<span class="title function_">push</span>(k + <span class="string">&#x27;=&#x27;</span> + data[k])</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> arr.<span class="title function_">join</span>(<span class="string">&#x27;&amp;&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> qs = <span class="title function_">resolveData</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;zs&#x27;</span>,<span class="attr">age</span>:<span class="number">20</span>&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(qs)</span><br></pre></td></tr></table></figure>

<h4 id="10-4-4-定义itheima函数"><a href="#10-4-4-定义itheima函数" class="headerlink" title="10.4.4   定义itheima函数"></a>10.4.4   定义itheima函数</h4><ul>
<li>在函数中，需要创建xhr对象，并监听 onreadystatechange 事件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">itheima</span>(<span class="params">options</span>)&#123;</span><br><span class="line">	<span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line">	<span class="comment">//拼接查询字符串</span></span><br><span class="line">	<span class="keyword">var</span> qs = <span class="title function_">resolveDta</span>(options.<span class="property">data</span>)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//监听请求状态变化的事件</span></span><br><span class="line">	xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="keyword">if</span>(xhr.<span class="property">readyState</span> === <span class="number">4</span> &amp; xhr.<span class="property">status</span> === <span class="number">200</span>)&#123;</span><br><span class="line">			<span class="keyword">var</span> result = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(xhr.<span class="property">responseText</span>)</span><br><span class="line">			options.<span class="title function_">success</span>(result)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="10-4-5-判断请求的类型"><a href="#10-4-5-判断请求的类型" class="headerlink" title="10.4.5   判断请求的类型"></a>10.4.5   判断请求的类型</h4><ul>
<li>不同的请求类型，对应 xhr 对象的不同操作，因此需要对请求类型进行 if … else … 的判断</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (options.<span class="property">method</span>.<span class="title function_">toUpperCase</span>() === <span class="string">&#x27;GET&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// 发起 GET 请求</span></span><br><span class="line">    xhr.<span class="title function_">open</span>(options.<span class="property">method</span>, options.<span class="property">url</span> + <span class="string">&#x27;?&#x27;</span> + qs)</span><br><span class="line">    xhr.<span class="title function_">send</span>()</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (options.<span class="property">method</span>.<span class="title function_">toUpperCase</span>() === <span class="string">&#x27;POST&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// 发起 POST 请求</span></span><br><span class="line">    xhr.<span class="title function_">open</span>(options.<span class="property">method</span>, options.<span class="property">url</span>)</span><br><span class="line">    xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>)</span><br><span class="line">    xhr.<span class="title function_">send</span>(qs)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="10-4-6-完整版示例"><a href="#10-4-6-完整版示例" class="headerlink" title="10.4.6   完整版示例"></a>10.4.6   完整版示例</h4><p><strong>01.html</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span> = <span class="string">&quot;./itheima.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;D:/JQuery/jquery-3.6.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">itheima</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">method</span>:<span class="string">&#x27;GET&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">url</span>:<span class="string">&#x27;http://www.liulongbin.top:3006/api/getbooks&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">id</span>:<span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">success</span>:<span class="keyword">function</span>(<span class="params">res</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>itheima.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">resolveData</span>(<span class="params">data</span>)&#123;</span><br><span class="line">	<span class="keyword">var</span> arr= []</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">let</span> k <span class="keyword">in</span> data)&#123;</span><br><span class="line">        <span class="keyword">var</span> str = k + <span class="string">&#x27;=&#x27;</span> + data[k]</span><br><span class="line">		arr.<span class="title function_">push</span>(str)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> arr.<span class="title function_">join</span>(<span class="string">&#x27;&amp;&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">itheima</span>(<span class="params">options</span>)&#123;</span><br><span class="line">	<span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line">	<span class="comment">//拼接查询字符串</span></span><br><span class="line">	<span class="keyword">var</span> qs = <span class="title function_">resolveData</span>(options.<span class="property">data</span>)</span><br><span class="line">    <span class="keyword">if</span>(options.<span class="property">method</span>.<span class="title function_">toUpperCase</span>()===<span class="string">&#x27;GET&#x27;</span>)&#123;</span><br><span class="line">        <span class="comment">// 发起 GET 请求</span></span><br><span class="line">        xhr.<span class="title function_">open</span>(options.<span class="property">method</span>,options.<span class="property">url</span>+<span class="string">&#x27;?&#x27;</span>+qs)</span><br><span class="line">        xhr.<span class="title function_">send</span>()</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(options.<span class="property">method</span>.<span class="title function_">toUpperCase</span>()===<span class="string">&#x27;POST&#x27;</span>)&#123;</span><br><span class="line">        <span class="comment">// 发起 POST 请求</span></span><br><span class="line">        xhr.<span class="title function_">open</span>(options.<span class="property">method</span>,options.<span class="property">url</span>)</span><br><span class="line">        xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;Content-Type&#x27;</span>,<span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>)</span><br><span class="line">        xhr.<span class="title function_">send</span>(qs)</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//监听请求状态变化的事件</span></span><br><span class="line">	xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="keyword">if</span>(xhr.<span class="property">readyState</span> === <span class="number">4</span> &amp; xhr.<span class="property">status</span> === <span class="number">200</span>)&#123;</span><br><span class="line">			<span class="keyword">var</span> result = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(xhr.<span class="property">responseText</span>)</span><br><span class="line">			options.<span class="title function_">success</span>(result)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="十一、XMLHttpRequest-Level2"><a href="#十一、XMLHttpRequest-Level2" class="headerlink" title="十一、XMLHttpRequest Level2"></a>十一、XMLHttpRequest Level2</h2><h3 id="11-1-旧版与新版的XMLHttpRequest进行比较"><a href="#11-1-旧版与新版的XMLHttpRequest进行比较" class="headerlink" title="11.1   旧版与新版的XMLHttpRequest进行比较"></a>11.1   旧版与新版的XMLHttpRequest进行比较</h3><ul>
<li><p>旧版：</p>
<ul>
<li>只支持文本数据的传输，无法用来读取和上传文件</li>
<li>传送和接受数据时，没有进度信息，只能提示有没有完成</li>
</ul>
</li>
<li><p>新版</p>
<ul>
<li><p>可以设置 HTTP 请求的时限</p>
<ul>
<li>XMLHttpRequest 对象增加了 timeout 属性，可以设置 HTTP 请求的时限：</li>
<li>其格式为：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="property">timeout</span> = <span class="number">3000</span></span><br><span class="line"></span><br><span class="line">将最长等待时间设为<span class="number">3000</span>毫秒，过了这个时限，就自动停止<span class="variable constant_">HTTP</span>请求。</span><br><span class="line"></span><br><span class="line">xhr.<span class="property">ontimeout</span> = <span class="keyword">function</span>(<span class="params">event</span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;请求超时！&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">定义一个timeout事件，用来指定回调函数</span><br></pre></td></tr></table></figure>
</li>
<li><p>可以使用 FormData 对象管理表单数据</p>
<ul>
<li>FormData 对象可以模拟表单操作</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.新建 FormData 对象</span></span><br><span class="line"><span class="keyword">var</span> fd = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span><br><span class="line"><span class="comment">//2.为 FormData 添加表单项</span></span><br><span class="line">fd.<span class="title function_">append</span>(<span class="string">&#x27;uname&#x27;</span>,<span class="string">&#x27;zs&#x27;</span>)</span><br><span class="line">fd.<span class="title function_">append</span>(<span class="string">&#x27;upwd&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>)</span><br><span class="line"><span class="comment">//3.创建 XHR 对象</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line"><span class="comment">//4.指定请求类型与URL地址</span></span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;POST&#x27;</span>,<span class="string">&#x27;http://www.liulongbin:3006/api/formdata&#x27;</span>)</span><br><span class="line"><span class="comment">//5.直接提交 FormData 对象，这与提交网页表单的效果，完全一样</span></span><br><span class="line">xhr.<span class="title function_">send</span>(fd)</span><br></pre></td></tr></table></figure>

<ul>
<li>FormData 对象可以用来获取网页表单的值</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取表单元素</span></span><br><span class="line"><span class="keyword">var</span> form = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#form1&#x27;</span>)</span><br><span class="line"><span class="comment">//监听表单元素的 submit 事件</span></span><br><span class="line">form.<span class="title function_">addEventListener</span>(<span class="string">&#x27;submit&#x27;</span>,<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">	e.<span class="title function_">preventDefault</span>()</span><br><span class="line">	<span class="comment">//根据 form 表单创建 FormData 对象，会自动将表单数据填充到 FormData 对象中</span></span><br><span class="line">	<span class="keyword">var</span> fd = <span class="keyword">new</span> <span class="title class_">FormData</span>(form)</span><br><span class="line">	<span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line">	xhr.<span class="title function_">open</span>(<span class="string">&#x27;POST&#x27;</span>,<span class="string">&#x27;http://www.liulongbin.top:3006/api/formdata&#x27;</span>)</span><br><span class="line">	xhr.<span class="title function_">send</span>(fd)</span><br><span class="line">	xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>可以上传文件</p>
<ul>
<li><p>实现步骤：</p>
<ul>
<li>定义 UI 结构</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">       &lt;!-- <span class="number">1.</span> 文件选择框 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">id</span>=<span class="string">&quot;file1&quot;</span> /&gt;</span></span></span><br><span class="line">&lt;!-- <span class="number">2.</span> 上传按钮 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btnUpload&quot;</span>&gt;</span>上传文件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span></span><br><span class="line">&lt;!-- <span class="number">3.</span> 显示上传到服务器上的图片 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;img&quot;</span> <span class="attr">width</span>=<span class="string">&quot;800&quot;</span> /&gt;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>验证是否选择了文件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 获取上传文件的按钮</span></span><br><span class="line"><span class="keyword">var</span> btnUpload = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#btnUpload&#x27;</span>)</span><br><span class="line"><span class="comment">// 2. 为按钮添加 click 事件监听</span></span><br><span class="line">btnUpload.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="comment">// 3. 获取到选择的文件列表</span></span><br><span class="line">	<span class="keyword">var</span> files = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#file1&#x27;</span>).<span class="property">files</span></span><br><span class="line">	<span class="keyword">if</span> (files.<span class="property">length</span> &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="title function_">alert</span>(<span class="string">&#x27;请选择要上传的文件！&#x27;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// ...后续业务逻辑</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>向 FormData 中追加文件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 创建 FormData 对象</span></span><br><span class="line"><span class="keyword">var</span> fd = <span class="keyword">new</span> <span class="title class_">FormData</span>()</span><br><span class="line"><span class="comment">// 2. 向 FormData 中追加文件</span></span><br><span class="line">fd.<span class="title function_">append</span>(<span class="string">&#x27;avatar&#x27;</span>, files[<span class="number">0</span>])</span><br></pre></td></tr></table></figure>

<ul>
<li>使用 xhr 发起上传文件的请求</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 创建 xhr 对象</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line"><span class="comment">// 2. 调用 open 函数，指定请求类型与URL地址。其中，请求类型必须为 POST</span></span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;http://www.liulongbin.top:3006/api/upload/avatar&#x27;</span>)</span><br><span class="line"><span class="comment">// 3. 发起请求</span></span><br><span class="line">xhr.<span class="title function_">send</span>(fd)</span><br></pre></td></tr></table></figure>

<ul>
<li>监听 onreadystatechange 事件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (xhr.<span class="property">readyState</span> === <span class="number">4</span> &amp;&amp; xhr.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> data = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(xhr.<span class="property">responseText</span>)</span><br><span class="line">    <span class="keyword">if</span> (data.<span class="property">status</span> === <span class="number">200</span>) &#123; <span class="comment">// 上传文件成功</span></span><br><span class="line">      <span class="comment">// 将服务器返回的图片地址，设置为 &lt;img&gt; 标签的 src 属性</span></span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#img&#x27;</span>).<span class="property">src</span> = <span class="string">&#x27;http://www.liulongbin.top:3006&#x27;</span> + data.<span class="property">url</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; <span class="comment">// 上传文件失败</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="property">message</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>可以获得数据传输的进度信息</p>
<ul>
<li>通过监听 xhr.upload.onprogress 事件，来获取文件上传进度</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建 XHR 对象</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line"><span class="comment">// 监听 xhr.upload 的 onprogress 事件</span></span><br><span class="line">xhr.<span class="property">upload</span>.<span class="property">onprogress</span> = <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="comment">// e.lengthComputable 是一个布尔值，表示当前上传的资源是否具有可计算的长度</span></span><br><span class="line">    <span class="keyword">if</span> (e.<span class="property">lengthComputable</span>) &#123;</span><br><span class="line">        <span class="comment">// e.loaded 已传输的字节</span></span><br><span class="line">        <span class="comment">// e.total  需传输的总字节</span></span><br><span class="line">        <span class="keyword">var</span> percentComplete = <span class="title class_">Math</span>.<span class="title function_">ceil</span>((e.<span class="property">loaded</span> / e.<span class="property">total</span>) * <span class="number">100</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>进度条组件获取网址：<a target="_blank" rel="noopener" href="https://v3.bootcss.com/components/#progress">https://v3.bootcss.com/components/#progress</a></li>
<li>监听上传进度的事件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="property">upload</span>.<span class="property">onprogress</span> = <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">   <span class="keyword">if</span> (e.<span class="property">lengthComputable</span>) &#123;</span><br><span class="line">   <span class="comment">// 1. 计算出当前上传进度的百分比</span></span><br><span class="line">   <span class="keyword">var</span> percentComplete = <span class="title class_">Math</span>.<span class="title function_">ceil</span>((e.<span class="property">loaded</span> / e.<span class="property">total</span>) * <span class="number">100</span>)</span><br><span class="line">   $(<span class="string">&#x27;#percent&#x27;</span>)</span><br><span class="line">       <span class="comment">// 2. 设置进度条的宽度</span></span><br><span class="line">       .<span class="title function_">attr</span>(<span class="string">&#x27;style&#x27;</span>, <span class="string">&#x27;width:&#x27;</span> + percentComplete + <span class="string">&#x27;%;&#x27;</span>)</span><br><span class="line">       <span class="comment">// 3. 显示当前的上传进度百分比</span></span><br><span class="line">       .<span class="title function_">html</span>(percentComplete + <span class="string">&#x27;%&#x27;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>监听上传进度的事件进度条颜色的变化</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="property">upload</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="string">&#x27;#percent&#x27;</span>)</span><br><span class="line">        <span class="comment">// 移除上传中的类样式</span></span><br><span class="line">        .<span class="title function_">removeClass</span>()</span><br><span class="line">        <span class="comment">// 添加上传完成的类样式  蓝变绿</span></span><br><span class="line">        .<span class="title function_">addClass</span>(<span class="string">&#x27;progress-bar progress-bar-success&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="11-2-完整示例"><a href="#11-2-完整示例" class="headerlink" title="11.2   完整示例"></a>11.2   完整示例</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;D:/JQuery/bootstrap-3.4.1-dist/css/bootstrap.css&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;D:/JQuery/jquery-3.6.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 1. 文件选择框 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">id</span>=<span class="string">&quot;file1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 2. 上传按钮 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btnUpload&quot;</span>&gt;</span>上传文件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--bootstrap 中的进度条--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;progress&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:500px;margin:15px 10px;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;progress-bar progress-bar-striped active&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 0%&quot;</span> <span class="attr">id</span>=<span class="string">&quot;percent&quot;</span>&gt;</span></span><br><span class="line">            0%</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 3. 显示上传到服务器上的图片 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;img&quot;</span> <span class="attr">width</span>=<span class="string">&quot;800&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 1. 获取上传文件的按钮</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> btnUpload = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#btnUpload&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 2. 为按钮添加 click 事件监听</span></span></span><br><span class="line"><span class="language-javascript">        btnUpload.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">	    <span class="comment">// 3. 获取到选择的文件列表</span></span></span><br><span class="line"><span class="language-javascript">	        <span class="keyword">var</span> files = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#file1&#x27;</span>).<span class="property">files</span></span></span><br><span class="line"><span class="language-javascript">	        <span class="keyword">if</span>(files.<span class="property">length</span> &lt;= <span class="number">0</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">		        <span class="keyword">return</span> <span class="title function_">alert</span>(<span class="string">&#x27;请选择要上传的文件！&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">	        &#125;</span></span><br><span class="line"><span class="language-javascript">             <span class="comment">// 1. 创建 FormData 对象</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> fd = <span class="keyword">new</span> <span class="title class_">FormData</span>()</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 2. 向 FormData 中追加文件</span></span></span><br><span class="line"><span class="language-javascript">            fd.<span class="title function_">append</span>(<span class="string">&#x27;avatar&#x27;</span>,files[<span class="number">0</span>])</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">             <span class="comment">// 1. 创建 xhr 对象</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            xhr.<span class="property">upload</span>.<span class="property">onprogress</span> = <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// e.lengthComputable 是一个布尔值，表示当前上传的资源是否具有可计算的长度</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (e.<span class="property">lengthComputable</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// e.loaded 已传输的字节</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// e.total  需传输的总字节</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> percentComplete = <span class="title class_">Math</span>.<span class="title function_">ceil</span>((e.<span class="property">loaded</span>/e.<span class="property">total</span>)*<span class="number">100</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(percentComplete);</span></span><br><span class="line"><span class="language-javascript">                    $(<span class="string">&#x27;#percent&#x27;</span>).<span class="title function_">attr</span>(<span class="string">&#x27;style&#x27;</span>,<span class="string">&#x27;width:&#x27;</span> + percentComplete + <span class="string">&#x27;%;&#x27;</span>).<span class="title function_">html</span>(percentComplete + <span class="string">&#x27;%&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 2. 调用 open 函数，指定请求类型与URL地址。其中，请求类型必须为 POST</span></span></span><br><span class="line"><span class="language-javascript">            xhr.<span class="title function_">open</span>(<span class="string">&#x27;POST&#x27;</span>,<span class="string">&#x27;http://www.liulongbin.top:3006/api/upload/avatar&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 3. 发起请求</span></span></span><br><span class="line"><span class="language-javascript">            xhr.<span class="title function_">send</span>(fd)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(xhr.<span class="property">readyState</span> === <span class="number">4</span> &amp;&amp; xhr.<span class="property">status</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> data = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(xhr.<span class="property">responseText</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(data.<span class="property">status</span> === <span class="number">200</span>)&#123; <span class="comment">// 上传文件成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 将服务器返回的图片地址，设置为 &lt;img&gt; 标签的 src 属性</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#img&#x27;</span>).<span class="property">src</span> = <span class="string">&#x27;http://www.liulongbin.top:3006&#x27;</span> + data.<span class="property">url</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123; <span class="comment">// 上传文件失败</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;图片上传失败！&#x27;</span>+data.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">                  &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="十二、jQuery高级用法"><a href="#十二、jQuery高级用法" class="headerlink" title="十二、jQuery高级用法"></a>十二、jQuery高级用法</h2><h3 id="12-1-jQuery实现文件上传"><a href="#12-1-jQuery实现文件上传" class="headerlink" title="12.1   jQuery实现文件上传"></a>12.1   jQuery实现文件上传</h3><h4 id="12-1-1-定义UI结构"><a href="#12-1-1-定义UI结构" class="headerlink" title="12.1.1   定义UI结构"></a>12.1.1   定义UI结构</h4><p>+ </p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 导入 jQuery --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./lib/jquery.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 文件选择框 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">id</span>=<span class="string">&quot;file1&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 上传文件按钮 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btnUpload&quot;</span>&gt;</span>上传<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="12-1-2-验证是否选择了文件"><a href="#12-1-2-验证是否选择了文件" class="headerlink" title="12.1.2   验证是否选择了文件"></a>12.1.2   验证是否选择了文件</h4><p>+ </p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;#btnUpload&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="comment">// 1. 将 jQuery 对象转化为 DOM 对象，并获取选中的文件列表</span></span><br><span class="line">     <span class="keyword">var</span> files = $(<span class="string">&#x27;#file1&#x27;</span>)[<span class="number">0</span>].<span class="property">files</span></span><br><span class="line">     <span class="comment">// 2. 判断是否选择了文件</span></span><br><span class="line">     <span class="keyword">if</span> (files.<span class="property">length</span> &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="title function_">alert</span>(<span class="string">&#x27;请选择图片后再上传！‘)</span></span><br><span class="line"><span class="string">     &#125;</span></span><br><span class="line"><span class="string">&#125;)</span></span><br></pre></td></tr></table></figure>

<h4 id="12-1-3-向FormData中追加文件"><a href="#12-1-3-向FormData中追加文件" class="headerlink" title="12.1.3   向FormData中追加文件"></a>12.1.3   向FormData中追加文件</h4><p>+ </p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 向 FormData 中追加文件</span></span><br><span class="line"><span class="keyword">var</span> fd = <span class="keyword">new</span> <span class="title class_">FormData</span>()</span><br><span class="line">fd.<span class="title function_">append</span>(<span class="string">&#x27;avatar&#x27;</span>, files[<span class="number">0</span>])</span><br></pre></td></tr></table></figure>

<h4 id="12-1-4-使用jQuery发起上传文件的请求"><a href="#12-1-4-使用jQuery发起上传文件的请求" class="headerlink" title="12.1.4   使用jQuery发起上传文件的请求"></a>12.1.4   使用jQuery发起上传文件的请求</h4><p>+ </p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">     <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">     <span class="attr">url</span>: <span class="string">&#x27;http://www.liulongbin.top:3006/api/upload/avatar&#x27;</span>,</span><br><span class="line">     <span class="attr">data</span>: fd,</span><br><span class="line">     <span class="comment">// 不修改 Content-Type 属性，使用 FormData 默认的 Content-Type 值</span></span><br><span class="line">     <span class="attr">contentType</span>: <span class="literal">false</span>,</span><br><span class="line">     <span class="comment">// 不对 FormData 中的数据进行 url 编码，而是将 FormData 数据原样发送到服务器</span></span><br><span class="line">     <span class="attr">processData</span>: <span class="literal">false</span>,</span><br><span class="line">     <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">     &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="12-2-jQuery实现loading效果"><a href="#12-2-jQuery实现loading效果" class="headerlink" title="12.2   jQuery实现loading效果"></a>12.2   jQuery实现loading效果</h3><h4 id="12-2-1-ajaxStart-callback"><a href="#12-2-1-ajaxStart-callback" class="headerlink" title="12.2.1   ajaxStart(callback)"></a>12.2.1   ajaxStart(callback)</h4><ul>
<li><p>Ajax 请求<strong>开始</strong>时，执行 ajaxStart 函数。可以在 ajaxStart 的 callback 中显示 loading 效果</p>
</li>
<li><pre><code class="js">// 自 jQuery 版本 1.8 起，该方法只能被附加到文档
$(document).ajaxStart(function() &#123;
     $(&#39;#loading&#39;).show()
&#125;)

$(document).ajaxStart() 函数会监听当前文档内所有的 Ajax 请求
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 12.2.2   ajaxStop(callback)</span><br><span class="line"></span><br><span class="line">+ Ajax 请求**结束**时，执行 ajaxStop 函数。可以在 ajaxStop 的 callback 中隐藏 loading 效果</span><br><span class="line"></span><br><span class="line">+ ```js</span><br><span class="line">  // 自 jQuery 版本 1.8 起，该方法只能被附加到文档</span><br><span class="line">  $(document).ajaxStop(function() &#123;</span><br><span class="line">       $(&#x27;#loading&#x27;).hide()</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<h2 id="十三、axios"><a href="#十三、axios" class="headerlink" title="十三、axios"></a>十三、axios</h2><h3 id="13-1-概念"><a href="#13-1-概念" class="headerlink" title="13.1   概念"></a>13.1   概念</h3><ul>
<li>专注于<strong>网络数据请求</strong>的库</li>
<li>比XMLHttpRequest更易用，比jQuery更轻量化</li>
</ul>
<h3 id="13-2-axios发起GET请求"><a href="#13-2-axios发起GET请求" class="headerlink" title="13.2   axios发起GET请求"></a>13.2   axios发起GET请求</h3><ul>
<li>语法：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="title function_">get</span>(<span class="string">&#x27;url&#x27;</span>, &#123; <span class="attr">params</span>: &#123; <span class="comment">/*参数*/</span> &#125; &#125;).<span class="title function_">then</span>(callback)</span><br></pre></td></tr></table></figure>

<ul>
<li>示例</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请求的 URL 地址</span></span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&#x27;http://www.liulongbin.top:3006/api/get&#x27;</span></span><br><span class="line"><span class="comment">// 请求的参数对象</span></span><br><span class="line"><span class="keyword">var</span> paramsObj = &#123; <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;</span><br><span class="line"><span class="comment">// 调用 axios.get() 发起 GET 请求</span></span><br><span class="line">axios.<span class="title function_">get</span>(url, &#123; <span class="attr">params</span>: paramsObj &#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">     <span class="comment">// res.data 是服务器返回的数据</span></span><br><span class="line">     <span class="keyword">var</span> result = res.<span class="property">data</span></span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="13-3-axios发起POST请求"><a href="#13-3-axios发起POST请求" class="headerlink" title="13.3   axios发起POST请求"></a>13.3   axios发起POST请求</h3><ul>
<li>语法</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="title function_">post</span>(<span class="string">&#x27;url&#x27;</span>, &#123; <span class="comment">/*参数*/</span> &#125;).<span class="title function_">then</span>(callback)</span><br></pre></td></tr></table></figure>

<ul>
<li>示例</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请求的 URL 地址</span></span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&#x27;http://www.liulongbin.top:3006/api/post&#x27;</span></span><br><span class="line"><span class="comment">// 要提交到服务器的数据</span></span><br><span class="line"><span class="keyword">var</span> dataObj = &#123; <span class="attr">location</span>: <span class="string">&#x27;北京&#x27;</span>, <span class="attr">address</span>: <span class="string">&#x27;顺义&#x27;</span> &#125;</span><br><span class="line"><span class="comment">// 调用 axios.post() 发起 POST 请求</span></span><br><span class="line">axios.<span class="title function_">post</span>(url, dataObj).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">     <span class="comment">// res.data 是服务器返回的数据</span></span><br><span class="line">     <span class="keyword">var</span> result = res.<span class="property">data</span></span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(result)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="13-4-直接使用axios发起请求"><a href="#13-4-直接使用axios发起请求" class="headerlink" title="13.4   直接使用axios发起请求"></a>13.4   直接使用axios发起请求</h3><ul>
<li>axios 也提供了 类似于 $.ajax() 的函数</li>
<li>示例</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">     <span class="attr">method</span>: <span class="string">&#x27;请求类型&#x27;</span>,</span><br><span class="line">     <span class="attr">url</span>: <span class="string">&#x27;请求的URL地址&#x27;</span>,</span><br><span class="line">     <span class="attr">data</span>: &#123; <span class="comment">/* POST数据 */</span> &#125;,</span><br><span class="line">     <span class="attr">params</span>: &#123; <span class="comment">/* GET参数 */</span> &#125;</span><br><span class="line">&#125;) .<span class="title function_">then</span>(callback)</span><br><span class="line"></span><br><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">     <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">     <span class="attr">url</span>: <span class="string">&#x27;http://www.liulongbin.top:3006/api/get&#x27;</span>,</span><br><span class="line">     <span class="attr">params</span>: &#123; <span class="comment">// GET 参数要通过 params 属性提供</span></span><br><span class="line">         <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">         <span class="attr">age</span>: <span class="number">20</span></span><br><span class="line">     &#125;</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">     <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">     <span class="attr">url</span>: <span class="string">&#x27;http://www.liulongbin.top:3006/api/post&#x27;</span>,</span><br><span class="line">     <span class="attr">data</span>: &#123; <span class="comment">// POST 数据要通过 data 属性提供</span></span><br><span class="line">         <span class="attr">bookname</span>: <span class="string">&#x27;程序员的自我修养&#x27;</span>,</span><br><span class="line">         <span class="attr">price</span>: <span class="number">666</span></span><br><span class="line">     &#125;</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="十四、同源策略"><a href="#十四、同源策略" class="headerlink" title="十四、同源策略"></a>十四、同源策略</h2><h3 id="14-1-同源概念"><a href="#14-1-同源概念" class="headerlink" title="14.1   同源概念"></a>14.1   同源概念</h3><ul>
<li>如果两个页面的协议、域名和端口都相同，则两个页面具有<strong>相同的源</strong></li>
</ul>
<h3 id="14-2-同源策略概念"><a href="#14-2-同源策略概念" class="headerlink" title="14.2   同源策略概念"></a>14.2   同源策略概念</h3><ul>
<li><p>浏览器提供的一个安全功能</p>
</li>
<li><p>通俗理解为：浏览器规定，A 网站的 JavaScript，不允许和非同源的网站 C 之间，进行资源的交互</p>
<ul>
<li>无法读取非同源网页的 Cookie、LocalStorage 和 IndexedDB</li>
<li>无法接触非同源网页的 DOM</li>
<li>无法向非同源地址发送 Ajax 请求</li>
</ul>
</li>
</ul>
<h3 id="14-3-跨域概念"><a href="#14-3-跨域概念" class="headerlink" title="14.3   跨域概念"></a>14.3   跨域概念</h3><ul>
<li><strong>同源</strong>指的是两个URL的协议、域名、端口一致，反之，则是<strong>跨域</strong></li>
<li>出现跨域的根本原因：浏览器的同源策略不允许非同源的URL之间进行资源的交互</li>
</ul>
<p><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE9.png"></p>
<h3 id="14-4-实现跨域请求"><a href="#14-4-实现跨域请求" class="headerlink" title="14.4   实现跨域请求"></a>14.4   实现跨域请求</h3><ul>
<li>有两种方法：JSONP（只支持GET请求，不支持POST请求）  和  CORS（支持GET和POST请求，不兼容低版本）</li>
</ul>
<h2 id="十五、JSONP"><a href="#十五、JSONP" class="headerlink" title="十五、JSONP"></a>十五、JSONP</h2><h3 id="15-1-概念"><a href="#15-1-概念" class="headerlink" title="15.1   概念"></a>15.1   概念</h3><ul>
<li>是JSON的一种使用方式，主要解决跨域数据访问的问题</li>
</ul>
<h3 id="15-2-实现原理"><a href="#15-2-实现原理" class="headerlink" title="15.2   实现原理"></a>15.2   实现原理</h3><ul>
<li>利用<code>&lt;script&gt;</code>标签不受同源影响，通过其src来引用非同源的js脚本</li>
<li>示例</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> &lt;script&gt;</span><br><span class="line">   <span class="keyword">function</span> <span class="title function_">success</span>(<span class="params">data</span>) &#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;获取到了data数据：&#x27;</span>)</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line">   &#125;</span><br><span class="line"> &lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://ajax.frontend.itheima.net:3006/api/jsonp?callback=success&amp;name=zs&amp;age=20&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="15-3-缺点"><a href="#15-3-缺点" class="headerlink" title="15.3   缺点"></a>15.3   缺点</h3><ul>
<li><strong>JSONP</strong> <strong>和</strong> <strong>Ajax</strong> <strong>之间没有任何关系</strong>，不能把 JSONP 请求数据的方式叫做 Ajax，因为 JSONP 没有用到 XMLHttpRequest 这个对象</li>
<li>只支持GET请求，不支持POST请求</li>
</ul>
<h3 id="15-4-JQuery中的JSONP"><a href="#15-4-JQuery中的JSONP" class="headerlink" title="15.4   JQuery中的JSONP"></a>15.4   JQuery中的JSONP</h3><ul>
<li>jQuery 提供的 $.ajax() 函数，除了可以发起真正的 Ajax 数据请求之外，还能够发起 JSONP 数据请求</li>
<li>示例</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;http://ajax.frontend.itheima.net:3006/api/jsonp?name=zs&amp;age=20&#x27;</span>,</span><br><span class="line">    <span class="comment">// 如果要使用 $.ajax() 发起 JSONP 请求，必须指定 datatype 为 jsonp</span></span><br><span class="line">    <span class="attr">dataType</span>: <span class="string">&#x27;jsonp&#x27;</span>,</span><br><span class="line">    <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">默认情况下，使用 jQuery 发起 <span class="title class_">JSON</span>P 请求，会自动携带一个 callback=jQueryxxx 的参数，jQueryxxx 是随机生成的一个回调函数名称。</span><br></pre></td></tr></table></figure>

<h3 id="15-5-自定义参数及回调函数名称"><a href="#15-5-自定义参数及回调函数名称" class="headerlink" title="15.5   自定义参数及回调函数名称"></a>15.5   自定义参数及回调函数名称</h3><ul>
<li>在使用 jQuery 发起 JSONP 请求时，如果想要自定义 JSONP 的<strong>参数</strong>以及<strong>回调函数名称</strong>，如下所示</li>
<li>示例</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;http://ajax.frontend.itheima.net:3006/api/jsonp?name=zs&amp;age=20&#x27;</span>,</span><br><span class="line">    <span class="attr">dataType</span>: <span class="string">&#x27;jsonp&#x27;</span>,</span><br><span class="line">    <span class="comment">// 发送到服务端的参数名称，默认值为 callback</span></span><br><span class="line">    <span class="attr">jsonp</span>: <span class="string">&#x27;callback&#x27;</span>,</span><br><span class="line">    <span class="comment">// 自定义的回调函数名称，默认值为 jQueryxxx 格式</span></span><br><span class="line">    <span class="attr">jsonpCallback</span>: <span class="string">&#x27;abc&#x27;</span>,</span><br><span class="line">    <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="15-6-jQuery中JSONP的实现过程"><a href="#15-6-jQuery中JSONP的实现过程" class="headerlink" title="15.6   jQuery中JSONP的实现过程"></a>15.6   jQuery中JSONP的实现过程</h3><ul>
<li>jQuery 中的 JSONP，也是通过 <code>&lt;script&gt;</code> 标签的 src 属性实现跨域数据访问的，只不过，jQuery 采用的是<strong>动态创建和移除</strong> <strong><code>&lt;script&gt;</code></strong> <strong>标签</strong>的方式，来发起 JSONP 数据请求。</li>
<li>在发起 JSONP 请求的时候，动态向 <code>&lt;header&gt;</code> 中 append 一个 <code>&lt;script&gt;</code> 标签</li>
<li>在 JSONP 请求成功以后，动态从 <code>&lt;header&gt;</code> 中移除刚才 append 进去的<code> &lt;script&gt;</code> 标签</li>
</ul>
<h2 id="十六、防抖"><a href="#十六、防抖" class="headerlink" title="十六、防抖"></a>十六、防抖</h2><h3 id="16-1-概念"><a href="#16-1-概念" class="headerlink" title="16.1   概念"></a>16.1   概念</h3><ul>
<li>当事件被触发后，延迟 n 秒后再执行回调，如果在这 n 秒内事件又被触发，则重新计时</li>
</ul>
<p><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE10.png"></p>
<h3 id="16-2-示例"><a href="#16-2-示例" class="headerlink" title="16.2   示例"></a>16.2   示例</h3><p>实现输入框的防抖</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> timer = <span class="literal">null</span>                    <span class="comment">// 1. 防抖动的 timer</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounceSearch</span>(<span class="params">keywords</span>) &#123; <span class="comment">// 2. 定义防抖的函数</span></span><br><span class="line">   timer = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="comment">// 发起 JSONP 请求</span></span><br><span class="line">   <span class="title function_">getSuggestList</span>(keywords)</span><br><span class="line">   &#125;, <span class="number">500</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$(<span class="string">&#x27;#ipt&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;keyup&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;  <span class="comment">// 3. 在触发 keyup 事件时，立即清空 timer</span></span><br><span class="line">   <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">   <span class="comment">// ...省略其他代码</span></span><br><span class="line">   <span class="title function_">debounceSearch</span>(keywords)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="十七、节流"><a href="#十七、节流" class="headerlink" title="十七、节流"></a>十七、节流</h2><h3 id="17-1-概念"><a href="#17-1-概念" class="headerlink" title="17.1   概念"></a>17.1   概念</h3><ul>
<li>可以减少一段时间内事件的触发频率</li>
</ul>
<p><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE11.png"></p>
<h3 id="17-2-节流阀的概念"><a href="#17-2-节流阀的概念" class="headerlink" title="17.2   节流阀的概念"></a>17.2   节流阀的概念</h3><ul>
<li>节流阀为空，表示可以执行下次操作；不为空，表示不能执行下次操作。</li>
<li>当前操作执行完，必须将节流阀<strong>重置</strong>为空，表示可以执行下次操作了。</li>
<li>每次执行操作前，必须<strong>先判断节流阀是否为空</strong></li>
</ul>
<h3 id="17-3-示例"><a href="#17-3-示例" class="headerlink" title="17.3   示例"></a>17.3   示例</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- <span class="variable constant_">UI</span> 结构 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./assets/angel.gif&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;angel&quot;</span> /&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* CSS 样式 */</span></span><br><span class="line">html, body &#123;</span><br><span class="line">  <span class="attr">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attr">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attr">overflow</span>: hidden;</span><br><span class="line">&#125;#angel &#123;</span><br><span class="line">  <span class="attr">position</span>: absolute;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="comment">// 获取图片元素</span></span><br><span class="line">   <span class="keyword">var</span> angel = $(<span class="string">&#x27;#angel&#x27;</span>)</span><br><span class="line">   <span class="comment">// 监听文档的 mousemove 事件</span></span><br><span class="line">   $(<span class="variable language_">document</span>).<span class="title function_">on</span>(<span class="string">&#x27;mousemove&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;      <span class="comment">// 设置图片的位置</span></span><br><span class="line">      $(angel).<span class="title function_">css</span>(<span class="string">&#x27;left&#x27;</span>, e.<span class="property">pageX</span> + <span class="string">&#x27;px&#x27;</span>).<span class="title function_">css</span>(<span class="string">&#x27;top&#x27;</span>, e.<span class="property">pageY</span> + <span class="string">&#x27;px&#x27;</span>)</span><br><span class="line">   &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> angel = $(<span class="string">&#x27;#angel&#x27;</span>)</span><br><span class="line">  <span class="keyword">var</span> timer = <span class="literal">null</span> <span class="comment">// 1.预定义一个 timer 节流阀</span></span><br><span class="line">  $(<span class="variable language_">document</span>).<span class="title function_">on</span>(<span class="string">&#x27;mousemove&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (timer) &#123; <span class="keyword">return</span> &#125; <span class="comment">// 3.判断节流阀是否为空，如果不为空，则证明距离上次执行间隔不足16毫秒</span></span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      $(angel).<span class="title function_">css</span>(<span class="string">&#x27;left&#x27;</span>, e.<span class="property">pageX</span> + <span class="string">&#x27;px&#x27;</span>).<span class="title function_">css</span>(<span class="string">&#x27;top&#x27;</span>, e.<span class="property">pageY</span> + <span class="string">&#x27;px&#x27;</span>)</span><br><span class="line">      timer = <span class="literal">null</span> <span class="comment">// 2.当设置了鼠标跟随效果后，清空 timer 节流阀，方便下次开启延时器</span></span><br><span class="line">    &#125;, <span class="number">16</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="十八、防抖与节流的区别"><a href="#十八、防抖与节流的区别" class="headerlink" title="十八、防抖与节流的区别"></a>十八、防抖与节流的区别</h2><ul>
<li>防抖：如果事件被频繁触发，防抖能保证只有最有一次触发生效！前面 N 多次的触发都会被忽略！</li>
<li>节流：如果事件被频繁触发，节流能够减少事件触发的频率，因此，节流是有选择性地执行一部分事件！</li>
</ul>
<h2 id="十九、HTTP协议"><a href="#十九、HTTP协议" class="headerlink" title="十九、HTTP协议"></a>十九、HTTP协议</h2><h3 id="19-1-通信"><a href="#19-1-通信" class="headerlink" title="19.1   通信"></a>19.1   通信</h3><h4 id="19-1-1-概念"><a href="#19-1-1-概念" class="headerlink" title="19.1.1   概念"></a>19.1.1   概念</h4><ul>
<li>就是<strong>信息的传递和交换</strong></li>
</ul>
<h4 id="19-1-2-三要素"><a href="#19-1-2-三要素" class="headerlink" title="19.1.2   三要素"></a>19.1.2   三要素</h4><ul>
<li>通信的主体</li>
<li>通信的内容</li>
<li>通信的方式</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">举例：</span><br><span class="line">服务器把传智专修学院的简介通过响应的方式发送给客户端浏览器。</span><br><span class="line"></span><br><span class="line">其中，</span><br><span class="line">通信的主体是服务器和客户端浏览器；</span><br><span class="line">通信的内容是传智专修学院的简介；</span><br><span class="line">通信的方式是响应；</span><br></pre></td></tr></table></figure>

<h3 id="19-2-通信协议"><a href="#19-2-通信协议" class="headerlink" title="19.2   通信协议"></a>19.2   通信协议</h3><h4 id="19-2-1-概念"><a href="#19-2-1-概念" class="headerlink" title="19.2.1   概念"></a>19.2.1   概念</h4><ul>
<li>是指通信的双方完成通信所必须遵守的规则和约定</li>
<li>通俗的理解：通信双方采用约定好的格式来发送和接收消息，这种事先约定好的通信格式，就叫做通信协议</li>
</ul>
<h4 id="19-2-2-网上的协议"><a href="#19-2-2-网上的协议" class="headerlink" title="19.2.2   网上的协议"></a>19.2.2   网上的协议</h4><ul>
<li>客户端与服务器之间要实现网页内容的传输，则通信的双方必须遵守网页内容的传输协议</li>
<li>网页内容又叫做<strong>超文本</strong>，因此网页内容的传输协议又叫做<strong>超文本传输协议</strong>（HyperText Transfer Protocol） ，简称 <strong>HTTP</strong> <strong>协议</strong></li>
</ul>
<h3 id="19-3-HTTP协议概念"><a href="#19-3-HTTP协议概念" class="headerlink" title="19.3   HTTP协议概念"></a>19.3   HTTP协议概念</h3><ul>
<li><strong>HTTP</strong> <strong>协议</strong>即超文本传送协议 (HyperText Transfer Protocol) ，它规定了客户端与服务器之间进行网页内容传输时，所必须遵守的传输格式</li>
</ul>
<h3 id="19-4-HTTP协议的交互模型"><a href="#19-4-HTTP协议的交互模型" class="headerlink" title="19.4   HTTP协议的交互模型"></a>19.4   HTTP协议的交互模型</h3><ul>
<li>采用了 <strong>请求</strong>&#x2F;<strong>响应</strong> 的交互模型</li>
</ul>
<p><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE12.png"></p>
<h3 id="19-5-HTTP请求消息"><a href="#19-5-HTTP请求消息" class="headerlink" title="19.5   HTTP请求消息"></a>19.5   HTTP请求消息</h3><ul>
<li>由于 HTTP 协议属于客户端浏览器和服务器之间的通信协议。因此，客户端发起的请求叫做 <strong>HTTP</strong> <strong>请求</strong>，客户端发送到服务器的消息，叫做 <strong>HTTP</strong> <strong>请求消息</strong>。</li>
<li>【注意】：HTTP 请求消息又叫做 HTTP 请求报文。</li>
<li>组成部分：<ul>
<li>请求行（request line）<ul>
<li>由请求方式、URL 和 HTTP 协议版本 3 个部分组成</li>
<li><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE14.png"></li>
</ul>
</li>
<li>请求头部（ header ） <ul>
<li>描述客户端的基本信息，从而把客户端相关的信息告知服务器</li>
<li><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE16.png" style="zoom:80%;" /></li>
<li><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE15.png" style="zoom:150%;" /></li>
</ul>
</li>
<li>空行 <ul>
<li>用来分隔请求头部与请求体</li>
<li><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE17.png" style="zoom:150%;" /></li>
</ul>
</li>
<li>请求体 <ul>
<li>请求体中存放的，是要通过 POST 方式提交到服务器的数据</li>
<li><strong>只有 POST 请求才有请求体，GET 请求没有请求体</strong></li>
</ul>
</li>
</ul>
</li>
<li>总体：</li>
</ul>
<p><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE13.png"></p>
<h3 id="19-6-HTTP响应消息"><a href="#19-6-HTTP响应消息" class="headerlink" title="19.6   HTTP响应消息"></a>19.6   HTTP响应消息</h3><ul>
<li>响应消息就是服务器响应给客户端的消息内容，也叫作响应报文</li>
<li>组成部分：<ul>
<li>状态行<ul>
<li>由 HTTP 协议版本、状态码和状态码的描述文本 3 个部分组成</li>
<li><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE19.png"></li>
</ul>
</li>
<li>响应头部<ul>
<li>用来描述服务器的基本信息。响应头部由多行 键&#x2F;值对 组成，每行的键和值之间用英文的冒号分隔</li>
<li><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE20.png"></li>
</ul>
</li>
<li>空行<ul>
<li>用来分隔响应头部与响应体</li>
</ul>
</li>
<li>响应体<ul>
<li>响应体中存放的，是服务器响应给客户端的资源内容</li>
<li><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE21.png"></li>
</ul>
</li>
</ul>
</li>
<li>总体：</li>
</ul>
<p><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE18.png"></p>
<h3 id="19-7-HTTP请求方法"><a href="#19-7-HTTP请求方法" class="headerlink" title="19.7   HTTP请求方法"></a>19.7   HTTP请求方法</h3><ul>
<li>属于 HTTP 协议中的一部分</li>
<li>用来表明要对服务器上的资源执行的操作。最常用的请求方法是 GET 和 POST</li>
<li><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE22.png"></li>
</ul>
<h3 id="19-8-HTTP响应状态码"><a href="#19-8-HTTP响应状态码" class="headerlink" title="19.8   HTTP响应状态码"></a>19.8   HTTP响应状态码</h3><ul>
<li>属于 HTTP 协议的一部分</li>
<li>用来标识响应的状态</li>
<li>响应状态码会随着响应消息一起被发送至客户端浏览器，浏览器根据服务器返回的响应状态码，就能知道这次 HTTP 请求的结果是成功还是失败了</li>
<li>HTTP 状态码由三个十进制数字组成，第一个十进制数字定义了状态码的类型，后两个数字用来对状态码进行细分。</li>
<li>HTTP 状态码共分为 5 种类型：</li>
<li><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE23.png"></li>
</ul>
<h4 id="19-8-1-2-成功相关的响应状态码"><a href="#19-8-1-2-成功相关的响应状态码" class="headerlink" title="19.8.1   2**成功相关的响应状态码"></a>19.8.1   2**成功相关的响应状态码</h4><ul>
<li>2** 范围的状态码，表示服务器已成功接收到请求并进行处理</li>
<li><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE24.png"></li>
</ul>
<h4 id="19-8-2-3-成功相关的响应状态码"><a href="#19-8-2-3-成功相关的响应状态码" class="headerlink" title="19.8.2   3**成功相关的响应状态码"></a>19.8.2   3**成功相关的响应状态码</h4><ul>
<li>3** 范围的状态码，表示表示服务器要求客户端重定向，需要客户端进一步的操作以完成资源的请求</li>
<li><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE25.png"></li>
</ul>
<p>####19.8.3   4**成功相关的响应状态码</p>
<ul>
<li>4** 范围的状态码，表示客户端的请求有非法内容，从而导致这次请求失败</li>
<li><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE26.png"></li>
</ul>
<h4 id="19-8-4-5-成功相关的响应状态码"><a href="#19-8-4-5-成功相关的响应状态码" class="headerlink" title="19.8.4   5**成功相关的响应状态码"></a>19.8.4   5**成功相关的响应状态码</h4><ul>
<li>5** 范围的状态码，表示服务器未能正常处理客户端的请求而出现意外错误</li>
<li><img src="https://raw.githubusercontent.com/qingxianzi002/My_note/main/pictureAjax%E5%9B%BE27.png"></li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://mandtold.work/2023/08/07/%E5%89%8D%E7%AB%AF/Ajax/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ajax%E7%9F%A5%E8%AF%86%E7%82%B9/" rel="tag">ajax知识点</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2024/10/10/GraceUI/GraceUI5%E6%89%8B%E5%86%8C/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            GraceUI5手册
          
        </div>
      </a>
    
    
  </nav>

  
   
  
    
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2023-2024
        <i class="ri-heart-fill heart_icon"></i> 清弦子
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      
        <li>
          <a href="https://beian.miit.gov.cn/" target="_black" rel="nofollow">粤ICP备2023094250号-1</a>
        </li>
        
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="清弦子的个人博客"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->

<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->
 
<script src="/js/clickBoom2.js"></script>
 
<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->
 
<script src="/js/dz.js"></script>
 
<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    <div id="music">
    
    
    
    <iframe frameborder="no" border="1" marginwidth="0" marginheight="0" width="200" height="52"
        src="//music.163.com/outchain/player?type=2&id=32922246&auto=0&height=32"></iframe>
</div>

<style>
    #music {
        position: fixed;
        right: 15px;
        bottom: 0;
        z-index: 998;
    }
</style>
    
    

  </div>
</body>

</html>